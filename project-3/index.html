<!DOCTYPE html>
<html>
<head>
	<title>The Golden Key</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="GK.css">
	<link href="https://fonts.googleapis.com/css?family=Libre+Caslon+Text&display=swap" rel="stylesheet">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/color/jquery.color.plus-names-2.1.2.min.js" integrity="sha256-Wp3wC/dKYQ/dCOUD7VUXXp4neLI5t0uUEF1pg0dFnAE=" crossorigin="anonymous"></script>
	
</head>
<body ontouchstart="">
	<style type="text/css">

	</style>
	<div class = "container">
		<div class="body-text">The Golden Key<p class="details" style='font-size:0.5em'>Grimm's Fairytales</p></div>
		<div class="button" id="next"><!-- <img class="arrow" src="arrow.png"> --></div>
		<div class="button" id="back"><!-- <img class="arrow" src="arrow.png"> --></div>
		<div class="overlay"></div>

	</div>


	<script type="text/javascript">

		var isPlaying;
		var index;
		var text = ["The Golden Key","In the winter time, when deep snow lay on the ground, a poor boy was forced to go out on a sledge to fetch wood.","When he had gathered it together, and packed it, he wished, as he was so frozen with cold, not to go home at once, but to light a fire and warm himself a little.", "So he scraped away the snow, and as he was thus clearing the ground, he found a tiny golden key","Hereupon he thought that where the key was, the lock must be also, and dug in the ground and found an iron chest.","‘If the key does but fit it!’ thought he; ‘no doubt there are precious things in that little box.’","He searched, but no keyhole was there.  At last he discovered one, but so small that it was hardly visible.", "He tried it, and the key fitted it exactly. Then he turned it once round,", "and now we must wait until he has quite unlocked it and opened the lid, and then we shall learn what wonderful things were lying in that box.", ""];

		function nextText(){
			$(".button#next").click(function(){

				
				if(!isPlaying){
					if(index>=0 && index<text.length-1)
					{
						isPlaying = true;

						index += 1;
						textScene();
						console.log("index:" + index);
					}

				}

			});
			$(".button#back").click(function(){
				
				
				if(!isPlaying)
				{
					if(index>0 && index<text.length){

						index -= 1;
						$(".body-text").text(text[index]);
						textReset();
						console.log("index:" + index);
					}
					else if (index == 0)
					{
						window.location ="../index.html"
					}
				}

			});

		}

		function textScene()
		{
			
			// $('.body-text').stop();
			// $('.container').stop();
			// $('.overlay').stop();
			if (index == 1)
			{
				//golden hour

				
				


				$(".container").animate({
					backgroundColor:"black",
					
				},1000,"linear", function(){
					$(".overlay").append("<img class='pic'src='loading.gif' style= 'height:auto; top: 20%'>");
				$(".overlay").css({"opacity": "1"});

					setTimeout(function(){ 
						$(".pic"). remove();
						
					// $(".body-text").css({opacity: 1});
					$(".body-text").text(text[index]);
					$(".body-text").css({"color":"white", "textAlign": "left", "fontSize": "1.9em"});
					isPlaying = false;

					}, 2000);
					
					
					
				});
			}
			else if (index == 2)
				//snow
			{
				

				$(".overlay").append("<img class='pic'src='snow.gif'>");
				$(".overlay").css({"opacity": "0"});

				$(".overlay").animate({
					
					opacity: "1"
					
					
				},2000, function(){
					$(".pic"). remove();



					$(".body-text").text(text[index]);
					
					$(".container").css({"backgroundColor": "white", "color": "black"})
					$(".body-text").css({"color":"black"});;
					isPlaying = false;
					
				});

			}
			else if (index == 3)
			{ 
				//fire
				$(".body-text").css({
					"color":"black"
				});
				//fire
				$(".body-text").animate({
					color: "orange"
				},800, function(){
					$(".body-text").animate({
						color: "white",
						
						top: "-20%"
					}, 1500, function(){
						$(".body-text").css({"color":"black", "top": "20%"});
					$(".body-text").text(text[index]);
					isPlaying = false;

					})
					
					
					
				});
				
				
			}
			else if (index == 4)
			{
				// scrape

				$(".overlay").append("<img class='pic'src='scrape.png' style= 'height:auto; top: 20%'>");
				$('.pic').attr("src", "scrape.gif");
				$(".overlay").css({"opacity": "1"});

				$(".overlay").animate({
					
					opacity: "1"
					
					
				},2000, function(){
					$('.pic').attr("src", "scrape.png");
					$(".pic"). remove();
					$(".body-text").text(text[index]);
					isPlaying = false;


			});
			}
			else if (index == 5){
				//iron chest
				

				$(".body-text").animate({
					"backgroundColor": "black",
					"color": "white"

				}, 1000, function(){
					
					$(".body-text").text(text[index]);
					isPlaying = false;
					
				})

			}
			else if (index == 6){
				// what's inside
				// $(".overlay").append("<img class='pic'src='Accident.png' style= 'width:100%'>");
				// $(".overlay").css({"opacity": "0"});

				// $(".overlay").animate({
					
				// 	opacity: "1"
					
					
				// },2000, function(){
				// 	$(".pic"). remove();



				// 	$(".body-text").text(text[index]);
					
				// 	$(".container").css({"backgroundColor": "white", "color": "black"});
				// 	$(".body-text").css({"backgroundColor":"transparent",
				// 		"color":"black"});
				// 	isPlaying = false;
					
				// });

				$(".body-text").css({"text-shadow": "-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000"}).animate({
					color: "white",
					backgroundColor: "white"
				},1000, function(){
					setTimeout(function(){
						$(".body-text").text(text[index]);
					
					$(".container").css({"backgroundColor": "white", "color": "black"});
					$(".body-text").css({"backgroundColor":"transparent",
						"color":"black", "text-shadow": "none"});
					isPlaying = false;
					}, 1000);
					
					
					
					
				});

			}
			else if (index == 7){
				// small hardly visible

				$(".body-text").animate({
					fontSize: "0"
				}, 3000, function(){
					$(".body-text").css({"fontSize":"1.9em"});
					$(".body-text").text(text[index]);
					isPlaying = false;
					
				})

			}
			else if (index == 8){
				// Rotation animation courtesy of Hideyuki Tabata
				$('.body-text').css({deg: 0}).animate(
					{ deg: 10 },
					{
						duration: 1200,
						step: function(now) {
							$(this).css({ transform: 'rotate(' + now + 'deg)' });
						},
						complete: function(){
						// $(".body-text").css({"transform":"rotate(0)"});
						$(".body-text").text(text[index]);
						isPlaying = false;
						
					}
					
				});
				

			}
			else if (index == 9)
			{
				
				

				$(".body-text").animate({
					opacity: "0"
				}, 1000,"linear", function(){
					$(".overlay").append("<img class='pic'src='loading.gif' style= 'height:auto; top: 20%'>");
					
					$(".body-text").text(text[index]);
					isPlaying = false;
					
				})





				isPlaying = false;
				

			}


			
		}

		function textReset()
		{
			if(index == 0){

				$(".body-text").append("<p class='details' style='font-size:0.5em'>Grimm's Fairytales</p>");
				$(".container").css({
					"backgroundColor":"white",
					"color":"black"
				});

				$(".body-text").css({
					"textAlign": "center",
					"fontSize": "2.4em",
					"color":"black"
				});

			}
			else if(index == 1)
			{
				$(".container").css({
					"backgroundColor":"black",
					"color":"white"
				});
				$(".body-text").css({
					"color":"white"
				});
				

			}
			else if(index == 2)
			{
				$(".body-text").css({
					"color":"black"
				});
			}
			else if(index == 3)
			{
				$(".body-text").css({"left":"0"});

			}
			else if(index == 4)
			{
				$(".body-text").css({
					"backgroundColor":"transparent",
					"color": "black"});
				
			}
			else if(index == 5)
			{
				$(".body-text").css({
					"backgroundColor":"black",
					"color": "white"});
				
			}
			else if(index == 6)
			{

				
			}
			else if(index == 7)
			{
				$(".body-text").css({
					"transform": "rotate(0)",
					"opacity": "1"});
				
			}
			else if(index == 8)
			{
				$(".body-text").css({
					
					"opacity": "1"});
				$(".pic").remove();
			}
		}

		
		




		$(document).ready(function(){

			index = 0;
			
			
			nextText();

		});
	</script>

</body>
</html>